<div class="title">
  <h1 style="font-weight: bolder">{{titulo}} Empleado</h1>
</div>
<app-progressbar *ngIf="loading"></app-progressbar>
<div class="my-1 mx-10">
  <form [formGroup]="form" (ngSubmit)="agregarEditarEmpleado()">
    <mat-card class="card">
      <mat-card-subtitle><h2>Ingresar Datos De Empleado</h2></mat-card-subtitle>
      <mat-grid-list cols="2" rowHeight="100px">
        <mat-grid-tile [colspan]="2">
          <mat-form-field class="inputs-form">
            <mat-label>Primer Apellido</mat-label>
            <input formControlName="primer_apellido" matInput maxlength="20" pattern="[A-Z ]*"  autocomplete="off" />
            <mat-error *ngIf="form.get('primer_apellido')!.hasError('pattern')">Solo se permiten caracteres de la A a la Z en mayúscula sin Ñ ni acentos.</mat-error>
          </mat-form-field>
        </mat-grid-tile>
        <mat-grid-tile>
          <mat-form-field class="inputs-form">
            <mat-label>Segundo Apellido</mat-label>
            <input formControlName="segundo_apellido" matInput maxlength="20" pattern="[A-Z ]*"  autocomplete="off" />
            <mat-error *ngIf="form.get('segundo_apellido')?.hasError('pattern')">Solo se permiten caracteres de la A a la Z en mayúscula sin Ñ ni acentos.</mat-error>
          </mat-form-field>
        </mat-grid-tile>
        <mat-grid-tile>
          <mat-form-field class="inputs-form">
            <mat-label>Primer Nombre</mat-label>
            <input formControlName="primer_nombre" matInput maxlength="20" pattern="[A-Z ]*"  autocomplete="off" />
            <mat-error *ngIf="form.get('primer_nombre')?.hasError('pattern')">Solo se permiten caracteres de la A a la Z en mayúscula sin Ñ ni acentos.</mat-error>
          </mat-form-field>
        </mat-grid-tile>
        <mat-grid-tile>
          <mat-form-field class="inputs-form">
            <mat-label>Otros Nombres</mat-label>
            <input formControlName="otro_nombre" matInput maxlength="50" pattern="[A-Z ]*" autocomplete="off" />
            <mat-error *ngIf="form.get('otro_nombre')?.hasError('pattern')">Solo se permiten caracteres de la A a la Z en mayúscula sin Ñ ni acentos.</mat-error>
          </mat-form-field>
        </mat-grid-tile>
        <mat-grid-tile>
          <mat-form-field class="inputs-form">
            <mat-label>País del Empleo</mat-label>
            <mat-select formControlName="paise_id">
              <mat-option *ngFor="let pais of paises" [value]="pais.id">{{pais.nombre}}</mat-option>
            </mat-select>
          </mat-form-field>
        </mat-grid-tile>
        <mat-grid-tile>
          <mat-form-field class="inputs-form">
            <mat-label>Tipo de Identificación</mat-label>
            <mat-select formControlName="tipo_identificacion_id">
              <mat-option *ngFor="let tipo of tiposIdentificacion" [value]="tipo.id">{{tipo.nombre}}</mat-option>
            </mat-select>
          </mat-form-field>
        </mat-grid-tile>
        <mat-grid-tile>
          <mat-form-field class="inputs-form">
            <mat-label>Numero de Identificación</mat-label>
            <input formControlName="numero_identificacion" matInput maxlength="20" pattern="[a-zA-Z0-9\-]+" autocomplete="off" />
            <mat-error *ngIf="form.get('numero_identificacion')?.hasError('pattern')">Solo se permiten caracteres alfanuméricos y guiones.</mat-error>
          </mat-form-field>
        </mat-grid-tile>       
        <mat-grid-tile>
          <mat-form-field class="inputs-form">
            <mat-label>Fecha de Ingreso</mat-label>
            <input type="date" formControlName="fecha_ingreso" matInput autocomplete="off" />
            <mat-error *ngIf="form.get('fecha_ingreso')?.hasError('fechaIngresoInvalida')">
              {{ form.get('fecha_ingreso')?.getError('fechaIngresoInvalida') }}
            </mat-error>
          </mat-form-field>
        </mat-grid-tile>
        <mat-grid-tile>
          <mat-form-field class="inputs-form">
            <mat-label>Área</mat-label>
            <mat-select formControlName="area_id">
              <mat-option *ngFor="let area of areas" [value]="area.id">{{area.nombre}}</mat-option>
            </mat-select>
          </mat-form-field>
        </mat-grid-tile>

        <mat-grid-tile *ngIf="id !== 0">
          <mat-form-field class="inputs-form">
            <mat-label>Estado</mat-label>
            <input formControlName="estado" matInput readonly />
          </mat-form-field>
        </mat-grid-tile>
        <mat-grid-tile *ngIf="id !== 0">
          <mat-form-field class="inputs-form">
            <mat-label>Fecha y Hora de Registro</mat-label>
            <input formControlName="fecha_registro" matInput readonly />
          </mat-form-field>
        </mat-grid-tile>
        <mat-grid-tile *ngIf="id !== 0">
          <mat-form-field class="inputs-form">
            <mat-label>Fecha y Hora de Actualización</mat-label>
            <input formControlName="fecha_actualizacion" matInput readonly />
          </mat-form-field>
        </mat-grid-tile>
        
        <mat-grid-tile [colspan]="2">
          <button class="but-volver" routerLink="/ListadoEmpleado" mat-raised-button>Volver</button>
          <button [disabled]="form.invalid" type="submit" mat-raised-button color="primary">Aceptar</button>
        </mat-grid-tile>
      </mat-grid-list>
    </mat-card>
  </form>
</div>